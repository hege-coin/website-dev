function runOnLoad(e){document.readyState=="loading"?document.addEventListener("DOMContentLoaded",e):e()}function scrollSlider(e,t){var n=document.getElementById(e);let s=n.firstElementChild.scrollWidth;n.scrollLeft+=s*t}function toggleBuyDexCex(e,t){var n=document.getElementById(e);return t||(t=n.className=="dex"?"cex":"dex"),n.className=t,!1}const BLOCKED_COUNTRIES=["GB"];async function isGeoBlocked(){const e=await fetch("https://get.geojs.io/v1/ip/country.json");if(!e.ok)return console.error("Geo-location check failed."),!1;const t=await e.json();return BLOCKED_COUNTRIES.includes(t.country)}function triggerGeoBlock(){const e=document.getElementById("geoblock-msg-template");if(!e)return console.error("Template for geo-block message not found."),!1;const t=e.content.cloneNode(!0);target=document.body,target.classList.add("geoblocked"),target.innerHTML="",target.appendChild(t)}runOnLoad(async function(){await isGeoBlocked()&&triggerGeoBlock()});function formatDate(e){return new Date(e*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function createMessageElement(e){if(!e.text)return!1;const t=document.createElement("div"),n=document.createElement("div"),s=document.createElement("div"),o=document.createElement("div"),i=document.createElement("strong"),a=document.createElement("date"),r=document.createElement("p");if(t.id="message-"+e.messageId,e.profilePhotoUrl){const t=document.createElement("img");t.src="https://stellar-rebirth-production.up.railway.app"+e.profilePhotoUrl,t.alt="pp",t.width="50",t.height="50",n.appendChild(t)}else n.innerHTML="<span>"+e.firstName.charAt(0).toUpperCase()+"</span>";return i.textContent=`${e.firstName} ${e.lastName||""}`.trim(),a.textContent=formatDate(e.timestamp),r.textContent=e.text,o.appendChild(i),o.appendChild(a),s.appendChild(o),s.appendChild(r),t.appendChild(n),t.appendChild(s),t}async function loadMessages(e,t,n){try{const s=50,o=t.scrollHeight-(t.scrollTop+t.clientHeight)<=s;messages=await e(n),messages.forEach(e=>{if(!document.getElementById("message-"+e.messageId)){let s=createMessageElement(e);s&&(t.appendChild(s),t.classList.add("filled"),n=Math.max(n,e.messageId))}}),o&&t.scrollTo({top:t.scrollHeight,behavior:"smooth"})}catch(e){console.error("Error loading messages:",e)}finally{setTimeout(function(){loadMessages(e,t,n)},5e3)}}async function getMessages(e){const n="https://stellar-rebirth-production.up.railway.app/api/v1/messages",t=new URL(n);e>0&&t.searchParams.append("since",e.toString());const s=await fetch(t),o=await s.json();return o.messages}runOnLoad(async function(){const e=document.getElementById("tg-live");e&&loadMessages(getMessages,e,0)});function setNftFloorPrice(e){const s="https://api-mainnet.magiceden.dev/v2/collections/hegends/stats",o="https://api.diadata.org/v1/assetQuotation/Solana/0x0000000000000000000000000000000000000000",t="https://cors.io/?url=",n={method:"GET",headers:{accept:"application/json"}};fetch(t+encodeURIComponent(o),n).then(e=>e.json()).then(o=>{sol_d=JSON.parse(o.body),fetch(t+encodeURIComponent(s),n).then(e=>e.json()).then(t=>{me_d=JSON.parse(t.body);const n=(sol_d.Price*me_d.floorPrice/1e9).toFixed(2);e.innerHTML="$"+n}).catch(e=>console.error(e))}).catch(e=>console.error(e))}runOnLoad(function(){const e=document.getElementById("hegends-floor-price");e&&setNftFloorPrice(e)}),runOnLoad(function(){function e(t,n){let s=n==0?t.length-1:n-1,o=(n+1)%t.length;t[n].classList.add("show"),t[s].classList.remove("show"),setTimeout(e,286,t,o)}const t=document.getElementsByClassName("hegends-anim");for(el of t){const n=el.getElementsByTagName("img");e(n,0)}}),runOnLoad(function(){if("IntersectionObserver"in window){var t=document.querySelectorAll(".lazy-video"),e=new IntersectionObserver(function(t){for(el of t)if(el.isIntersecting){var n=el.target;const t=document.createElement("video");t.controls=!1,t.autoplay=!0,t.muted=!0,t.loop=!0,t.playsInline=!0,t.width=n.width,t.height=n.height;const s=document.createElement("source");s.src=n.dataset.src,t.appendChild(s),n.parentNode.insertBefore(t,n),n.remove(),t.load(),e.unobserve(n)}});for(v of t)e.observe(v)}})